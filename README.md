# COVID-19 感染状況の多角的分析

このリポジトリでは、世界各国のCOVID-19感染データを用いて、感染・死亡傾向の特徴把握と時間的変化の分析を行っています。  
主に3つの分析手法を用いて、感染拡大の地理的・経済的背景や動的クラスタリング、感染率・死亡率の安定性指標の導入を試みました。

---

## 使用方法

- `analytics/` ディレクトリ内にある各種Rスクリプトを順に実行してください。
- 可視化図は実行時にRのグラフィックデバイスに表示されます。必要に応じて画像保存処理を追加してください。
- 本READMEを参照し、各スクリプトの目的や使用データの前提を確認してください。

---

## 参考データ

- Our World in Data COVID-19 Dataset  
  https://covid.ourworldindata.org/data/owid-covid-data.csv

---

## 必要パッケージ

- tidyverse  
- lubridate  
- ggfortify

---

## 1. 世界各国における感染・死亡状況の要約プロット

### 目的  
各国の感染状況と死亡状況の水準を簡潔に把握すること。

### 分析方法  
各国の「感染者数／死亡者数」の平均値および最大値を算出。  
横軸に感染者数、縦軸に死亡者数をとった散布図を作成。

### 使用した変数  
- total_cases_per_million  
- total_deaths_per_million

### プロット図の意味  
各点は一国を表し、感染と死亡の水準を示す。  
右上：感染者・死亡者ともに多い国。  
左下：両方とも低い国。

### 考察  
欧米諸国は感染・死亡ともに高水準であり、特に初期の感染拡大における都市密集度の高さや高齢化が影響していると考えられる。  
一方、アジア諸国は比較的低い水準に留まっているが、これは積極的な公衆衛生対策や文化的要素（例：マスク着用習慣）などが関与している可能性がある。  
また、感染者数や死亡者数の報告体制の差異も数値の違いに影響を及ぼしているため、数値のみでの評価は注意が必要である。  
全体として、感染と死亡の分布は社会経済的・医療インフラの格差を強く反映しており、政策立案時にはこれらの背景を踏まえた地域別対策が重要である。

---

## 2. 時間変化を考慮した動的クラスタリング

### 目的  
感染状況が時間とともにどう変化しているかを把握し、年ごとの傾向を比較。

### 分析方法  
各年（2020・2021・2022）で total_cases_per_million を基に PCA を実施。  
2次元に圧縮し、各国の分布を可視化。

### 使用した変数  
- total_cases_per_million（年別に平均化）

### プロット図の意味  
各点は一国。PCAの第一主成分と第二主成分で表現。  
点の位置が似ていれば、感染動向が類似していることを示す。

### 考察  
2020年の初期段階では、全世界での感染拡大が比較的均質であったが、2021年以降はワクチンの普及や変異株の出現、各国の政策対応の違いにより感染パターンに多様性が生じた。  
特に、一部の国では感染拡大が抑制される一方で、他国では再拡大が見られたことが分散の増大として現れている。  
この動的なクラスタリングは、パンデミックの進行を時系列で捉え、各国の対応効果やウイルスの変異状況を評価する上で有用である。

---

## 3. 死亡率／感染率の変動係数（安定性指標）の導入

### 目的  
感染率・死亡率の「安定性」つまり波の激しさを見ることで、パンデミックに対する各国の耐性を評価。

### 分析方法  
国ごとに new_cases_per_million と new_deaths_per_million の変動係数（CV）を算出。  
それを元に t-SNE を使って2次元に圧縮し、視覚的に類似国をクラスタリング。

### 使用した変数  
- new_cases_per_million  
- new_deaths_per_million

### プロット図の意味  
点の距離が近い国は「感染・死亡の変動パターン」が類似。  
点のばらつきで、安定性の違いが視覚化される。

### 考察  
変動係数を用いることで、単に累積感染者数の多寡だけでなく、感染拡大の波の激しさや安定度を評価できる。  
変動が小さい国は、効果的な感染対策の継続や医療体制の安定化が背景にあると推察される。  
一方、変動が大きい国では、感染制御の難しさや社会的混乱が顕著であり、緊急時の対応力の強化が課題とされる。  
この指標は、将来的にリスク管理や資源配分の意思決定に役立つ可能性がある。

---

## 4. PCAによる国ごとの感染傾向の可視化

COVID-19の累積感染者数データに対して、**主成分分析（PCA）**を用いて国ごとの感染傾向を可視化した。感染者数のスケール差を抑えるため、事前に log1p変換（log(1 + x)）を施している。

### 4.1 分析手順

1. 欠損がなく、かつ世界平均で感染者数が多い日付を抽出し、分析対象の日を限定。  
2. 国別 × 日別の累積感染者数をwide形式に変換。  
3. log1p変換を施し、主成分分析（PCA）を実行。  
4. PCAの結果をcontinent（大陸）別に色分けして可視化。

### 4.2 結果と考察

PCAプロットでは、大陸ごとにある程度まとまったクラスタが形成されていることが確認できた。  

特にヨーロッパやアジアの国々は比較的近い位置に配置され、似た感染推移のパターンを共有していた可能性が高い。  

一方で、北米・南米・アフリカの国々は位置がよりばらけており、感染状況のばらつきが大きいことが示唆された。  

log1p変換により、感染者数の絶対値の大きな国（例：米国・インドなど）がPCAに過度に影響を与えるのを防ぎ、感染動向の相対的な傾向を抽出できたと考えられる。
